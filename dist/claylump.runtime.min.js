/*! Claylump - v0.0.4 - 2014-10-21 */!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){"use strict";{var b=a("./template-compiler").default;a("./helper").default}window.ClayRuntime={compiler:b}},{"./helper":2,"./template-compiler":3}],2:[function(a,b,c){"use strict";function d(a,b,c){for(var d,e=0,f=Object.keys(b);d=f[e++];)(c||!a[d])&&(a[d]=b[d]);return a}function e(a){for(var b,c=0,d=[];b=a[c++];)o(b)?d=d.concat(b):d.push(b);return d}function f(a){return Array.isArray(a)?a.slice(0):d({},a)}function g(a){for(var b,c=[],d=0;b=a[d++];)-1===c.indexOf(b)&&c.push(b);return c}function h(){if(t)return t;for(var a,b=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector"],c=HTMLElement.prototype,d=0;a=b[d++];)if(c[a])return t=a}function i(a,b){return a[h()](b)}function j(a){var b=Object.prototype.toString.call(a);return b.slice(b.indexOf(" ")+1,-1)}function k(a){return Array.prototype.slice.call(a)}function l(a){return"function"==typeof a}function m(a){return"string"==typeof a}function n(a){return"number"==typeof a}function o(a){return"Array"===j(a)}function p(a){return"Object"===j(a)}function q(a){return-1!==a.indexOf("-")}function r(a,b){function c(){return a.apply(this,b)}var d;return c.prototype=a.prototype,d=new c,d.constructor=a,d}function s(a){u?a():v.push(a)}var t,u=!1,v=[];document.addEventListener("DOMContentLoaded",function(){u=!0;for(var a,b=0;a=v[b++];)a()},!1),c.default={noop:function(){},mix:d,uniq:g,clone:f,flatten:e,ready:s,invoke:r,toArray:k,toString:j,matchElement:i,isString:m,isNumber:n,isArray:o,isFunction:l,isObject:p,isCustomElementName:q}},{}],3:[function(a,b,c){"use strict";var d=a("./helper").default,e=a("htmlParser"),f=/{{[^{}]+}}/g,g=/{{(\w+)\sin\s([\w\.]+)}}/,h="cl-repeat",i="__EVAL_FUNCTION__";c.default={create:function(){return new j}};var j=function(){var a=function(){};return Object.defineProperties(a.prototype,{compileFromHtml:{writable:!0,value:function(a){var b=this.parseHtml(a);return this.preCompile=!1,this.compileDomStructure(b)}},serializeFromHtml:{writable:!0,value:function(a){var b=this.parseHtml(a);return this.preCompile=!0,JSON.stringify(this.compileDomStructure(b))}},parseHtml:{writable:!0,value:function(a){var b=new e.DefaultHandler(function(a){a&&console.error(a)},{enforceEmptyTags:!0,ignoreWhitespace:!0,verbose:!1}),c=new e.Parser(b);if(c.parseComplete(a),b.dom.length>1)throw Error("Template must have exactly one root element. was: "+a);return b.dom[0]}},compileDomStructure:{writable:!0,value:function(a){var b=this;void 0===a&&(a={});var c,d,e=a.data,f=a.attribs||{},g=a.children||[],i=a.evaluators={attrs:{},style:null,data:null,repeat:null},j=0;for(f.style&&(a.style=f.style,i.style=this.compileValue(a.style),delete f.style),c=Object.keys(f);d=c[j++];)d===h?(i.repeat=this.compileRepeatExpression(f[h]),delete f[h]):i.attrs[d]=this.compileValue(f[d]);return i.data=this.compileValue(e),g.forEach(function(a){return b.compileDomStructure(a)}),a}},compileValue:{writable:!0,value:function(a){a=a||"";var b=a.match(f);if(null===b)return null;var c=function(a){return a[i]=!0,a}({args:["data",["var s=[];","s.push('",a.replace(/[\r\n\t]/g," ").split("'").join("\\'").replace(/{{([^{}]+)}}/g,"',(data.$1 != null ? data.$1 : ''),'").split(/\s{2,}/).join(" "),"');","return s.join('');"].join("")]});return this.preCompile?c:d.invoke(Function,c.args)}},compileRepeatExpression:{writable:!0,value:function(a){var b,c,e=(a||"").match(g);if(null===e)throw new Error("Unexpected syntax for repeat: "+a);b=e[2],c=e[1];var f=function(a){return a[i]=!0,a}({args:["data",["return data."+b+".map(function(item) {","  var ks, k, i = 0, r = {};","  ks = Object.keys(data);","  while ((k = ks[i++])) {","    r[k] = data[k];","  }","  r."+c+" = item;","  return r;","});"].join("")]});return this.preCompile?f:d.invoke(Function,f.args)}}}),a}()},{"./helper":2,htmlParser:4}],4:[function(a,b,c){(function(d,e){!function(){function f(){return"function"==typeof a&&"object"==typeof c&&"object"==typeof b&&"string"==typeof d&&"string"==typeof e}function g(a,b){this._options=b?b:{},void 0==this._options.includeLocation&&(this._options.includeLocation=!1),this.validateHandler(a),this._handler=a,this.reset()}function h(a){h.super_.call(this,a,{ignoreWhitespace:!0,verbose:!1,enforceEmptyTags:!1})}function i(a,b){this.reset(),this._options=b?b:{},void 0==this._options.ignoreWhitespace&&(this._options.ignoreWhitespace=!1),void 0==this._options.verbose&&(this._options.verbose=!0),void 0==this._options.enforceEmptyTags&&(this._options.enforceEmptyTags=!0),"function"==typeof a&&(this._callback=a)}function j(a,b){var c=function(){};c.prototype=b.prototype,a.super_=b,a.prototype=new c,a.prototype.constructor=a}if(!f()){if(this.Tautologistics){if(this.Tautologistics.NodeHtmlParser)return}else this.Tautologistics={};this.Tautologistics.NodeHtmlParser={},c=this.Tautologistics.NodeHtmlParser}var k={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag"};g._reTrim=/(^\s+|\s+$)/g,g._reTrimComment=/(^\!--|--$)/g,g._reWhitespace=/\s/g,g._reTagName=/^\s*(\/?)\s*([^\s\/]+)/,g._reAttrib=/([^=<>\"\'\s]+)\s*=\s*"([^"]*)"|([^=<>\"\'\s]+)\s*=\s*'([^']*)'|([^=<>\"\'\s]+)\s*=\s*([^'"\s]+)|([^=<>\"\'\s\/]+)/g,g._reTags=/[\<\>]/g,g.prototype.parseComplete=function(a){this.reset(),this.parseChunk(a),this.done()},g.prototype.parseChunk=function(a){this._done&&this.handleError(new Error("Attempted to parse chunk after parsing already done")),this._buffer+=a,this.parseTags()},g.prototype.done=function(){if(!this._done){if(this._done=!0,this._buffer.length){var a=this._buffer;this._buffer="";var b={raw:a,data:this._parseState==k.Text?a:a.replace(g._reTrim,""),type:this._parseState};(this._parseState==k.Tag||this._parseState==k.Script||this._parseState==k.Style)&&(b.name=this.parseTagName(b.data)),this.parseAttribs(b),this._elements.push(b)}this.writeHandler(),this._handler.done()}},g.prototype.reset=function(){this._buffer="",this._done=!1,this._elements=[],this._elementsCurrent=0,this._current=0,this._next=0,this._location={row:0,col:0,charOffset:0,inBuffer:0},this._parseState=k.Text,this._prevTagSep="",this._tagStack=[],this._handler.reset()},g.prototype._options=null,g.prototype._handler=null,g.prototype._buffer=null,g.prototype._done=!1,g.prototype._elements=null,g.prototype._elementsCurrent=0,g.prototype._current=0,g.prototype._next=0,g.prototype._location=null,g.prototype._parseState=k.Text,g.prototype._prevTagSep="",g.prototype._tagStack=null,g.prototype.parseTagAttribs=function(a){for(var b=a.length,c=0;b>c;){var d=a[c++];(d.type==k.Tag||d.type==k.Script||d.type==k.style)&&this.parseAttribs(d)}return a},g.prototype.parseAttribs=function(a){if(a.type==k.Script||a.type==k.Style||a.type==k.Tag){var b=a.data.split(g._reWhitespace,1)[0],c=a.data.substring(b.length);if(!(c.length<1)){var d;for(g._reAttrib.lastIndex=0;d=g._reAttrib.exec(c);)void 0==a.attribs&&(a.attribs={}),"string"==typeof d[1]&&d[1].length?a.attribs[d[1]]=d[2]:"string"==typeof d[3]&&d[3].length?a.attribs[d[3].toString()]=d[4].toString():"string"==typeof d[5]&&d[5].length?a.attribs[d[5]]=d[6]:"string"==typeof d[7]&&d[7].length&&(a.attribs[d[7]]=d[7])}}},g.prototype.parseTagName=function(a){if(null==a||""==a)return"";var b=g._reTagName.exec(a);return b?(b[1]?"/":"")+b[2]:""},g.prototype.parseTags=function(){for(var a=this._buffer.length-1;g._reTags.test(this._buffer);){this._next=g._reTags.lastIndex-1;var b=this._buffer.charAt(this._next),c=this._buffer.substring(this._current,this._next),d={raw:c,data:this._parseState==k.Text?c:c.replace(g._reTrim,""),type:this._parseState},e=this.parseTagName(d.data);if(this._tagStack.length)if(this._tagStack[this._tagStack.length-1]==k.Script){if("/script"==e.toLowerCase())this._tagStack.pop();else if(0!=d.raw.indexOf("!--")&&(d.type=k.Text,this._elements.length&&this._elements[this._elements.length-1].type==k.Text)){var f=this._elements[this._elements.length-1];f.raw=f.data=f.raw+this._prevTagSep+d.raw,d.raw=d.data=""}}else if(this._tagStack[this._tagStack.length-1]==k.Style){if("/style"==e.toLowerCase())this._tagStack.pop();else if(0!=d.raw.indexOf("!--"))if(d.type=k.Text,this._elements.length&&this._elements[this._elements.length-1].type==k.Text){var f=this._elements[this._elements.length-1];""!=d.raw?(f.raw=f.data=f.raw+this._prevTagSep+d.raw,d.raw=d.data=""):f.raw=f.data=f.raw+this._prevTagSep}else""!=d.raw&&(d.raw=d.data=d.raw)}else if(this._tagStack[this._tagStack.length-1]==k.Comment){var h=d.raw.length;if("-"==d.raw.charAt(h-2)&&"-"==d.raw.charAt(h-1)&&">"==b)if(this._tagStack.pop(),this._elements.length&&this._elements[this._elements.length-1].type==k.Comment){var f=this._elements[this._elements.length-1];f.raw=f.data=(f.raw+d.raw).replace(g._reTrimComment,""),d.raw=d.data="",d.type=k.Text}else d.type=k.Comment;else if(d.type=k.Comment,this._elements.length&&this._elements[this._elements.length-1].type==k.Comment){var f=this._elements[this._elements.length-1];f.raw=f.data=f.raw+d.raw+b,d.raw=d.data="",d.type=k.Text}else d.raw=d.data=d.raw+b}if(d.type==k.Tag){d.name=e;var i=e.toLowerCase();if(0==d.raw.indexOf("!--")){d.type=k.Comment,delete d.name;var h=d.raw.length;"-"==d.raw.charAt(h-1)&&"-"==d.raw.charAt(h-2)&&">"==b?d.raw=d.data=d.raw.replace(g._reTrimComment,""):(d.raw+=b,this._tagStack.push(k.Comment))}else 0==d.raw.indexOf("!")||0==d.raw.indexOf("?")?d.type=k.Directive:"script"==i?(d.type=k.Script,"/"!=d.data.charAt(d.data.length-1)&&this._tagStack.push(k.Script)):"/script"==i?d.type=k.Script:"style"==i?(d.type=k.Style,"/"!=d.data.charAt(d.data.length-1)&&this._tagStack.push(k.Style)):"/style"==i&&(d.type=k.Style);d.name&&"/"==d.name.charAt(0)&&(d.data=d.name)}(""!=d.raw||d.type!=k.Text)&&(this._options.includeLocation&&!d.location&&(d.location=this.getLocation(d.type==k.Tag)),this.parseAttribs(d),this._elements.push(d),d.type!=k.Text&&d.type!=k.Comment&&d.type!=k.Directive&&"/"==d.data.charAt(d.data.length-1)&&this._elements.push({raw:"/"+d.name,data:"/"+d.name,name:"/"+d.name,type:d.type})),this._parseState="<"==b?k.Tag:k.Text,this._current=this._next+1,this._prevTagSep=b}this._options.includeLocation&&(this.getLocation(),this._location.row+=this._location.inBuffer,this._location.inBuffer=0,this._location.charOffset=0),this._buffer=this._current<=a?this._buffer.substring(this._current):"",this._current=0,this.writeHandler()},g.prototype.getLocation=function(a){for(var b,c=this._location,d=this._current-(a?1:0),e=a&&0==c.charOffset&&0==this._current;c.charOffset<d;c.charOffset++)b=this._buffer.charAt(c.charOffset),"\n"==b?(c.inBuffer++,c.col=0):"\r"!=b&&c.col++;return{line:c.row+c.inBuffer+1,col:c.col+(e?0:1)}},g.prototype.validateHandler=function(a){if("object"!=typeof a)throw new Error("Handler is not an object");if("function"!=typeof a.reset)throw new Error("Handler method 'reset' is invalid");if("function"!=typeof a.done)throw new Error("Handler method 'done' is invalid");if("function"!=typeof a.writeTag)throw new Error("Handler method 'writeTag' is invalid");if("function"!=typeof a.writeText)throw new Error("Handler method 'writeText' is invalid");if("function"!=typeof a.writeComment)throw new Error("Handler method 'writeComment' is invalid");if("function"!=typeof a.writeDirective)throw new Error("Handler method 'writeDirective' is invalid")},g.prototype.writeHandler=function(a){if(a=!!a,!this._tagStack.length||a)for(;this._elements.length;){var b=this._elements.shift();switch(b.type){case k.Comment:this._handler.writeComment(b);break;case k.Directive:this._handler.writeDirective(b);break;case k.Text:this._handler.writeText(b);break;default:this._handler.writeTag(b)}}},g.prototype.handleError=function(a){if("function"!=typeof this._handler.error)throw a;this._handler.error(a)},j(h,i),h.prototype.done=function(){var a,b={},c=l.getElementsByTagName(function(a){return"rss"==a||"feed"==a},this.dom,!1);if(c.length&&(a=c[0]),a){if("rss"==a.name){b.type="rss",a=a.children[0],b.id="";try{b.title=l.getElementsByTagName("title",a.children,!1)[0].children[0].data}catch(d){}try{b.link=l.getElementsByTagName("link",a.children,!1)[0].children[0].data}catch(d){}try{b.description=l.getElementsByTagName("description",a.children,!1)[0].children[0].data}catch(d){}try{b.updated=new Date(l.getElementsByTagName("lastBuildDate",a.children,!1)[0].children[0].data)}catch(d){}try{b.author=l.getElementsByTagName("managingEditor",a.children,!1)[0].children[0].data}catch(d){}b.items=[],l.getElementsByTagName("item",a.children).forEach(function(a){var c={};try{c.id=l.getElementsByTagName("guid",a.children,!1)[0].children[0].data}catch(d){}try{c.title=l.getElementsByTagName("title",a.children,!1)[0].children[0].data}catch(d){}try{c.link=l.getElementsByTagName("link",a.children,!1)[0].children[0].data}catch(d){}try{c.description=l.getElementsByTagName("description",a.children,!1)[0].children[0].data}catch(d){}try{c.pubDate=new Date(l.getElementsByTagName("pubDate",a.children,!1)[0].children[0].data)}catch(d){}b.items.push(c)})}else{b.type="atom";try{b.id=l.getElementsByTagName("id",a.children,!1)[0].children[0].data}catch(d){}try{b.title=l.getElementsByTagName("title",a.children,!1)[0].children[0].data}catch(d){}try{b.link=l.getElementsByTagName("link",a.children,!1)[0].attribs.href}catch(d){}try{b.description=l.getElementsByTagName("subtitle",a.children,!1)[0].children[0].data}catch(d){}try{b.updated=new Date(l.getElementsByTagName("updated",a.children,!1)[0].children[0].data)}catch(d){}try{b.author=l.getElementsByTagName("email",a.children,!0)[0].children[0].data}catch(d){}b.items=[],l.getElementsByTagName("entry",a.children).forEach(function(a){var c={};try{c.id=l.getElementsByTagName("id",a.children,!1)[0].children[0].data}catch(d){}try{c.title=l.getElementsByTagName("title",a.children,!1)[0].children[0].data}catch(d){}try{c.link=l.getElementsByTagName("link",a.children,!1)[0].attribs.href}catch(d){}try{c.description=l.getElementsByTagName("summary",a.children,!1)[0].children[0].data}catch(d){}try{c.pubDate=new Date(l.getElementsByTagName("updated",a.children,!1)[0].children[0].data)}catch(d){}b.items.push(c)})}this.dom=b}h.super_.prototype.done.call(this)},i._emptyTags={area:1,base:1,basefont:1,br:1,col:1,frame:1,hr:1,img:1,input:1,isindex:1,link:1,meta:1,param:1,embed:1},i.reWhitespace=/^\s*$/,i.prototype.dom=null,i.prototype.reset=function(){this.dom=[],this._done=!1,this._tagStack=[],this._tagStack.last=function(){return this.length?this[this.length-1]:null}},i.prototype.done=function(){this._done=!0,this.handleCallback(null)},i.prototype.writeTag=function(a){this.handleElement(a)},i.prototype.writeText=function(a){this._options.ignoreWhitespace&&i.reWhitespace.test(a.data)||this.handleElement(a)},i.prototype.writeComment=function(a){this.handleElement(a)},i.prototype.writeDirective=function(a){this.handleElement(a)},i.prototype.error=function(a){this.handleCallback(a)},i.prototype._options=null,i.prototype._callback=null,i.prototype._done=!1,i.prototype._tagStack=null,i.prototype.handleCallback=function(a){if("function"==typeof this._callback)this._callback(a,this.dom);else if(a)throw a},i.prototype.isEmptyTag=function(a){var b=a.name.toLowerCase();return"/"==b.charAt(0)&&(b=b.substring(1)),this._options.enforceEmptyTags&&!!i._emptyTags[b]},i.prototype.handleElement=function(a){if(this._done&&this.handleCallback(new Error("Writing to the handler after done() called is not allowed without a reset()")),this._options.verbose||(delete a.raw,("tag"==a.type||"script"==a.type||"style"==a.type)&&delete a.data),this._tagStack.last())if(a.type!=k.Text&&a.type!=k.Comment&&a.type!=k.Directive)if("/"==a.name.charAt(0)){var b=a.name.substring(1);if(!this.isEmptyTag(a)){for(var c=this._tagStack.length-1;c>-1&&this._tagStack[c--].name!=b;);if(c>-1||this._tagStack[0].name==b)for(;c<this._tagStack.length-1;)this._tagStack.pop()}}else this._tagStack.last().children||(this._tagStack.last().children=[]),this._tagStack.last().children.push(a),this.isEmptyTag(a)||this._tagStack.push(a);else this._tagStack.last().children||(this._tagStack.last().children=[]),this._tagStack.last().children.push(a);else a.type!=k.Text&&a.type!=k.Comment&&a.type!=k.Directive?"/"!=a.name.charAt(0)&&(this.dom.push(a),this.isEmptyTag(a)||this._tagStack.push(a)):this.dom.push(a)};var l={testElement:function(a,b){if(!b)return!1;for(var c in a)if("tag_name"==c){if("tag"!=b.type&&"script"!=b.type&&"style"!=b.type)return!1;if(!a.tag_name(b.name))return!1}else if("tag_type"==c){if(!a.tag_type(b.type))return!1}else if("tag_contains"==c){if("text"!=b.type&&"comment"!=b.type&&"directive"!=b.type)return!1;if(!a.tag_contains(b.data))return!1}else if(!b.attribs||!a[c](b.attribs[c]))return!1;return!0},getElements:function(a,b,c,d){function e(a){return function(b){return b==a}}if(c=void 0===c||null===c||!!c,d=isNaN(parseInt(d))?-1:parseInt(d),!b)return[];var f,g=[];for(var h in a)"function"!=typeof a[h]&&(a[h]=e(a[h]));if(l.testElement(a,b)&&g.push(b),d>=0&&g.length>=d)return g;if(c&&b.children)f=b.children;else{if(!(b instanceof Array))return g;f=b}for(var i=0;i<f.length&&(g=g.concat(l.getElements(a,f[i],c,d)),!(d>=0&&g.length>=d));i++);return g},getElementById:function(a,b,c){var d=l.getElements({id:a},b,c,1);return d.length?d[0]:null},getElementsByTagName:function(a,b,c,d){return l.getElements({tag_name:a},b,c,d)},getElementsByTagType:function(a,b,c,d){return l.getElements({tag_type:a},b,c,d)}};c.Parser=g,c.DefaultHandler=i,c.RssHandler=h,c.ElementType=k,c.DomUtils=l}()}).call(this,"/node_modules/htmlParser/lib/htmlparser.js","/node_modules/htmlParser/lib")},{}]},{},[1]);