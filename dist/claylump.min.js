/*! Claylump - v0.0.3 - 2014-09-12 */!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){"use strict";var b=a("./src/register"),c=a("./src/helper");window.Claylump=c.mix(b,{Template:a("./src/template"),TemplateHelper:a("./src/template-helper"),Element:a("./src/element"),Observer:a("./src/observer"),Event:a("./src/event"),Helper:a("./src/helper"),modules:{http:a("./src/modules/http")}})},{"./src/element":33,"./src/event":34,"./src/helper":35,"./src/modules/http":36,"./src/observer":37,"./src/register":38,"./src/template":41,"./src/template-helper":40}],2:[function(){},{}],3:[function(a,b,c){(function(d,e){!function(){function f(){return"function"==typeof a&&"object"==typeof c&&"object"==typeof b&&"string"==typeof d&&"string"==typeof e}function g(a,b){this._options=b?b:{},void 0==this._options.includeLocation&&(this._options.includeLocation=!1),this.validateHandler(a),this._handler=a,this.reset()}function h(a){h.super_.call(this,a,{ignoreWhitespace:!0,verbose:!1,enforceEmptyTags:!1})}function i(a,b){this.reset(),this._options=b?b:{},void 0==this._options.ignoreWhitespace&&(this._options.ignoreWhitespace=!1),void 0==this._options.verbose&&(this._options.verbose=!0),void 0==this._options.enforceEmptyTags&&(this._options.enforceEmptyTags=!0),"function"==typeof a&&(this._callback=a)}function j(a,b){var c=function(){};c.prototype=b.prototype,a.super_=b,a.prototype=new c,a.prototype.constructor=a}if(!f()){if(this.Tautologistics){if(this.Tautologistics.NodeHtmlParser)return}else this.Tautologistics={};this.Tautologistics.NodeHtmlParser={},c=this.Tautologistics.NodeHtmlParser}var k={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag"};g._reTrim=/(^\s+|\s+$)/g,g._reTrimComment=/(^\!--|--$)/g,g._reWhitespace=/\s/g,g._reTagName=/^\s*(\/?)\s*([^\s\/]+)/,g._reAttrib=/([^=<>\"\'\s]+)\s*=\s*"([^"]*)"|([^=<>\"\'\s]+)\s*=\s*'([^']*)'|([^=<>\"\'\s]+)\s*=\s*([^'"\s]+)|([^=<>\"\'\s\/]+)/g,g._reTags=/[\<\>]/g,g.prototype.parseComplete=function(a){this.reset(),this.parseChunk(a),this.done()},g.prototype.parseChunk=function(a){this._done&&this.handleError(new Error("Attempted to parse chunk after parsing already done")),this._buffer+=a,this.parseTags()},g.prototype.done=function(){if(!this._done){if(this._done=!0,this._buffer.length){var a=this._buffer;this._buffer="";var b={raw:a,data:this._parseState==k.Text?a:a.replace(g._reTrim,""),type:this._parseState};(this._parseState==k.Tag||this._parseState==k.Script||this._parseState==k.Style)&&(b.name=this.parseTagName(b.data)),this.parseAttribs(b),this._elements.push(b)}this.writeHandler(),this._handler.done()}},g.prototype.reset=function(){this._buffer="",this._done=!1,this._elements=[],this._elementsCurrent=0,this._current=0,this._next=0,this._location={row:0,col:0,charOffset:0,inBuffer:0},this._parseState=k.Text,this._prevTagSep="",this._tagStack=[],this._handler.reset()},g.prototype._options=null,g.prototype._handler=null,g.prototype._buffer=null,g.prototype._done=!1,g.prototype._elements=null,g.prototype._elementsCurrent=0,g.prototype._current=0,g.prototype._next=0,g.prototype._location=null,g.prototype._parseState=k.Text,g.prototype._prevTagSep="",g.prototype._tagStack=null,g.prototype.parseTagAttribs=function(a){for(var b=a.length,c=0;b>c;){var d=a[c++];(d.type==k.Tag||d.type==k.Script||d.type==k.style)&&this.parseAttribs(d)}return a},g.prototype.parseAttribs=function(a){if(a.type==k.Script||a.type==k.Style||a.type==k.Tag){var b=a.data.split(g._reWhitespace,1)[0],c=a.data.substring(b.length);if(!(c.length<1)){var d;for(g._reAttrib.lastIndex=0;d=g._reAttrib.exec(c);)void 0==a.attribs&&(a.attribs={}),"string"==typeof d[1]&&d[1].length?a.attribs[d[1]]=d[2]:"string"==typeof d[3]&&d[3].length?a.attribs[d[3].toString()]=d[4].toString():"string"==typeof d[5]&&d[5].length?a.attribs[d[5]]=d[6]:"string"==typeof d[7]&&d[7].length&&(a.attribs[d[7]]=d[7])}}},g.prototype.parseTagName=function(a){if(null==a||""==a)return"";var b=g._reTagName.exec(a);return b?(b[1]?"/":"")+b[2]:""},g.prototype.parseTags=function(){for(var a=this._buffer.length-1;g._reTags.test(this._buffer);){this._next=g._reTags.lastIndex-1;var b=this._buffer.charAt(this._next),c=this._buffer.substring(this._current,this._next),d={raw:c,data:this._parseState==k.Text?c:c.replace(g._reTrim,""),type:this._parseState},e=this.parseTagName(d.data);if(this._tagStack.length)if(this._tagStack[this._tagStack.length-1]==k.Script){if("/script"==e.toLowerCase())this._tagStack.pop();else if(0!=d.raw.indexOf("!--")&&(d.type=k.Text,this._elements.length&&this._elements[this._elements.length-1].type==k.Text)){var f=this._elements[this._elements.length-1];f.raw=f.data=f.raw+this._prevTagSep+d.raw,d.raw=d.data=""}}else if(this._tagStack[this._tagStack.length-1]==k.Style){if("/style"==e.toLowerCase())this._tagStack.pop();else if(0!=d.raw.indexOf("!--"))if(d.type=k.Text,this._elements.length&&this._elements[this._elements.length-1].type==k.Text){var f=this._elements[this._elements.length-1];""!=d.raw?(f.raw=f.data=f.raw+this._prevTagSep+d.raw,d.raw=d.data=""):f.raw=f.data=f.raw+this._prevTagSep}else""!=d.raw&&(d.raw=d.data=d.raw)}else if(this._tagStack[this._tagStack.length-1]==k.Comment){var h=d.raw.length;if("-"==d.raw.charAt(h-2)&&"-"==d.raw.charAt(h-1)&&">"==b)if(this._tagStack.pop(),this._elements.length&&this._elements[this._elements.length-1].type==k.Comment){var f=this._elements[this._elements.length-1];f.raw=f.data=(f.raw+d.raw).replace(g._reTrimComment,""),d.raw=d.data="",d.type=k.Text}else d.type=k.Comment;else if(d.type=k.Comment,this._elements.length&&this._elements[this._elements.length-1].type==k.Comment){var f=this._elements[this._elements.length-1];f.raw=f.data=f.raw+d.raw+b,d.raw=d.data="",d.type=k.Text}else d.raw=d.data=d.raw+b}if(d.type==k.Tag){d.name=e;var i=e.toLowerCase();if(0==d.raw.indexOf("!--")){d.type=k.Comment,delete d.name;var h=d.raw.length;"-"==d.raw.charAt(h-1)&&"-"==d.raw.charAt(h-2)&&">"==b?d.raw=d.data=d.raw.replace(g._reTrimComment,""):(d.raw+=b,this._tagStack.push(k.Comment))}else 0==d.raw.indexOf("!")||0==d.raw.indexOf("?")?d.type=k.Directive:"script"==i?(d.type=k.Script,"/"!=d.data.charAt(d.data.length-1)&&this._tagStack.push(k.Script)):"/script"==i?d.type=k.Script:"style"==i?(d.type=k.Style,"/"!=d.data.charAt(d.data.length-1)&&this._tagStack.push(k.Style)):"/style"==i&&(d.type=k.Style);d.name&&"/"==d.name.charAt(0)&&(d.data=d.name)}(""!=d.raw||d.type!=k.Text)&&(this._options.includeLocation&&!d.location&&(d.location=this.getLocation(d.type==k.Tag)),this.parseAttribs(d),this._elements.push(d),d.type!=k.Text&&d.type!=k.Comment&&d.type!=k.Directive&&"/"==d.data.charAt(d.data.length-1)&&this._elements.push({raw:"/"+d.name,data:"/"+d.name,name:"/"+d.name,type:d.type})),this._parseState="<"==b?k.Tag:k.Text,this._current=this._next+1,this._prevTagSep=b}this._options.includeLocation&&(this.getLocation(),this._location.row+=this._location.inBuffer,this._location.inBuffer=0,this._location.charOffset=0),this._buffer=this._current<=a?this._buffer.substring(this._current):"",this._current=0,this.writeHandler()},g.prototype.getLocation=function(a){for(var b,c=this._location,d=this._current-(a?1:0),e=a&&0==c.charOffset&&0==this._current;c.charOffset<d;c.charOffset++)b=this._buffer.charAt(c.charOffset),"\n"==b?(c.inBuffer++,c.col=0):"\r"!=b&&c.col++;return{line:c.row+c.inBuffer+1,col:c.col+(e?0:1)}},g.prototype.validateHandler=function(a){if("object"!=typeof a)throw new Error("Handler is not an object");if("function"!=typeof a.reset)throw new Error("Handler method 'reset' is invalid");if("function"!=typeof a.done)throw new Error("Handler method 'done' is invalid");if("function"!=typeof a.writeTag)throw new Error("Handler method 'writeTag' is invalid");if("function"!=typeof a.writeText)throw new Error("Handler method 'writeText' is invalid");if("function"!=typeof a.writeComment)throw new Error("Handler method 'writeComment' is invalid");if("function"!=typeof a.writeDirective)throw new Error("Handler method 'writeDirective' is invalid")},g.prototype.writeHandler=function(a){if(a=!!a,!this._tagStack.length||a)for(;this._elements.length;){var b=this._elements.shift();switch(b.type){case k.Comment:this._handler.writeComment(b);break;case k.Directive:this._handler.writeDirective(b);break;case k.Text:this._handler.writeText(b);break;default:this._handler.writeTag(b)}}},g.prototype.handleError=function(a){if("function"!=typeof this._handler.error)throw a;this._handler.error(a)},j(h,i),h.prototype.done=function(){var a,b={},c=l.getElementsByTagName(function(a){return"rss"==a||"feed"==a},this.dom,!1);if(c.length&&(a=c[0]),a){if("rss"==a.name){b.type="rss",a=a.children[0],b.id="";try{b.title=l.getElementsByTagName("title",a.children,!1)[0].children[0].data}catch(d){}try{b.link=l.getElementsByTagName("link",a.children,!1)[0].children[0].data}catch(d){}try{b.description=l.getElementsByTagName("description",a.children,!1)[0].children[0].data}catch(d){}try{b.updated=new Date(l.getElementsByTagName("lastBuildDate",a.children,!1)[0].children[0].data)}catch(d){}try{b.author=l.getElementsByTagName("managingEditor",a.children,!1)[0].children[0].data}catch(d){}b.items=[],l.getElementsByTagName("item",a.children).forEach(function(a){var c={};try{c.id=l.getElementsByTagName("guid",a.children,!1)[0].children[0].data}catch(d){}try{c.title=l.getElementsByTagName("title",a.children,!1)[0].children[0].data}catch(d){}try{c.link=l.getElementsByTagName("link",a.children,!1)[0].children[0].data}catch(d){}try{c.description=l.getElementsByTagName("description",a.children,!1)[0].children[0].data}catch(d){}try{c.pubDate=new Date(l.getElementsByTagName("pubDate",a.children,!1)[0].children[0].data)}catch(d){}b.items.push(c)})}else{b.type="atom";try{b.id=l.getElementsByTagName("id",a.children,!1)[0].children[0].data}catch(d){}try{b.title=l.getElementsByTagName("title",a.children,!1)[0].children[0].data}catch(d){}try{b.link=l.getElementsByTagName("link",a.children,!1)[0].attribs.href}catch(d){}try{b.description=l.getElementsByTagName("subtitle",a.children,!1)[0].children[0].data}catch(d){}try{b.updated=new Date(l.getElementsByTagName("updated",a.children,!1)[0].children[0].data)}catch(d){}try{b.author=l.getElementsByTagName("email",a.children,!0)[0].children[0].data}catch(d){}b.items=[],l.getElementsByTagName("entry",a.children).forEach(function(a){var c={};try{c.id=l.getElementsByTagName("id",a.children,!1)[0].children[0].data}catch(d){}try{c.title=l.getElementsByTagName("title",a.children,!1)[0].children[0].data}catch(d){}try{c.link=l.getElementsByTagName("link",a.children,!1)[0].attribs.href}catch(d){}try{c.description=l.getElementsByTagName("summary",a.children,!1)[0].children[0].data}catch(d){}try{c.pubDate=new Date(l.getElementsByTagName("updated",a.children,!1)[0].children[0].data)}catch(d){}b.items.push(c)})}this.dom=b}h.super_.prototype.done.call(this)},i._emptyTags={area:1,base:1,basefont:1,br:1,col:1,frame:1,hr:1,img:1,input:1,isindex:1,link:1,meta:1,param:1,embed:1},i.reWhitespace=/^\s*$/,i.prototype.dom=null,i.prototype.reset=function(){this.dom=[],this._done=!1,this._tagStack=[],this._tagStack.last=function(){return this.length?this[this.length-1]:null}},i.prototype.done=function(){this._done=!0,this.handleCallback(null)},i.prototype.writeTag=function(a){this.handleElement(a)},i.prototype.writeText=function(a){this._options.ignoreWhitespace&&i.reWhitespace.test(a.data)||this.handleElement(a)},i.prototype.writeComment=function(a){this.handleElement(a)},i.prototype.writeDirective=function(a){this.handleElement(a)},i.prototype.error=function(a){this.handleCallback(a)},i.prototype._options=null,i.prototype._callback=null,i.prototype._done=!1,i.prototype._tagStack=null,i.prototype.handleCallback=function(a){if("function"==typeof this._callback)this._callback(a,this.dom);else if(a)throw a},i.prototype.isEmptyTag=function(a){var b=a.name.toLowerCase();return"/"==b.charAt(0)&&(b=b.substring(1)),this._options.enforceEmptyTags&&!!i._emptyTags[b]},i.prototype.handleElement=function(a){if(this._done&&this.handleCallback(new Error("Writing to the handler after done() called is not allowed without a reset()")),this._options.verbose||(delete a.raw,("tag"==a.type||"script"==a.type||"style"==a.type)&&delete a.data),this._tagStack.last())if(a.type!=k.Text&&a.type!=k.Comment&&a.type!=k.Directive)if("/"==a.name.charAt(0)){var b=a.name.substring(1);if(!this.isEmptyTag(a)){for(var c=this._tagStack.length-1;c>-1&&this._tagStack[c--].name!=b;);if(c>-1||this._tagStack[0].name==b)for(;c<this._tagStack.length-1;)this._tagStack.pop()}}else this._tagStack.last().children||(this._tagStack.last().children=[]),this._tagStack.last().children.push(a),this.isEmptyTag(a)||this._tagStack.push(a);else this._tagStack.last().children||(this._tagStack.last().children=[]),this._tagStack.last().children.push(a);else a.type!=k.Text&&a.type!=k.Comment&&a.type!=k.Directive?"/"!=a.name.charAt(0)&&(this.dom.push(a),this.isEmptyTag(a)||this._tagStack.push(a)):this.dom.push(a)};var l={testElement:function(a,b){if(!b)return!1;for(var c in a)if("tag_name"==c){if("tag"!=b.type&&"script"!=b.type&&"style"!=b.type)return!1;if(!a.tag_name(b.name))return!1}else if("tag_type"==c){if(!a.tag_type(b.type))return!1}else if("tag_contains"==c){if("text"!=b.type&&"comment"!=b.type&&"directive"!=b.type)return!1;if(!a.tag_contains(b.data))return!1}else if(!b.attribs||!a[c](b.attribs[c]))return!1;return!0},getElements:function(a,b,c,d){function e(a){return function(b){return b==a}}if(c=void 0===c||null===c||!!c,d=isNaN(parseInt(d))?-1:parseInt(d),!b)return[];var f,g=[];for(var h in a)"function"!=typeof a[h]&&(a[h]=e(a[h]));if(l.testElement(a,b)&&g.push(b),d>=0&&g.length>=d)return g;if(c&&b.children)f=b.children;else{if(!(b instanceof Array))return g;f=b}for(var i=0;i<f.length&&(g=g.concat(l.getElements(a,f[i],c,d)),!(d>=0&&g.length>=d));i++);return g},getElementById:function(a,b,c){var d=l.getElements({id:a},b,c,1);return d.length?d[0]:null},getElementsByTagName:function(a,b,c,d){return l.getElements({tag_name:a},b,c,d)},getElementsByTagType:function(a,b,c,d){return l.getElements({tag_type:a},b,c,d)}};c.Parser=g,c.DefaultHandler=i,c.RssHandler=h,c.ElementType=k,c.DomUtils=l}()}).call(this,"/node_modules/htmlParser/lib/htmlparser.js","/node_modules/htmlParser/lib")},{}],4:[function(a,b){var c=a("vdom/create-element");b.exports=c},{"vdom/create-element":12}],5:[function(a,b){var c=a("vtree/diff");b.exports=c},{"vtree/diff":18}],6:[function(a,b){var c=a("./h/index.js");b.exports=c},{"./h/index.js":7}],7:[function(a,b){function c(a,b,c){var j,k,l,n;if(c||e(b)&&(c=b,b=void 0),j=m(a,b),g(j)?k=b:(k=j.properties,j=j.tagName),f(c)){for(var o=c.length,p=0;o>p;p++){var q=c[p];g(q)&&(c[p]=new i(q))}l=c}else g(c)?l=[new i(c)]:d(c)&&(l=[c]);return k&&"key"in k&&(n=k.key,delete k.key),new h(j,k,l,n)}function d(a){return j(a)||k(a)||l(a)}function e(a){return f(a)||g(a)||d(a)}var f=a("x-is-array"),g=a("x-is-string"),h=a("vtree/vnode.js"),i=a("vtree/vtext.js"),j=a("vtree/is-vnode"),k=a("vtree/is-vtext"),l=a("vtree/is-widget"),m=a("./parse-tag");b.exports=c},{"./parse-tag":8,"vtree/is-vnode":22,"vtree/is-vtext":23,"vtree/is-widget":24,"vtree/vnode.js":26,"vtree/vtext.js":28,"x-is-array":29,"x-is-string":30}],8:[function(a,b){function c(a,b){if(!a)return"div";var c=!(b&&"id"in b),g=d(a,e),h=null;f.test(g[1])&&(h="div");var i,j,k,l,m;for(m=0;m<g.length;m++)k=g[m],k&&(l=k.charAt(0),h?"."===l?(j=j||[],j.push(k.substring(1,k.length))):"#"===l&&c&&(i=k.substring(1,k.length)):h=k);var n;if(b)void 0===i||"id"in b||(b.id=i),j&&(b.className&&j.push(b.className),b.className=j.join(" ")),n=h;else if(j||void 0!==i){var o={};void 0!==i&&(o.id=i),j&&(o.className=j.join(" ")),n={tagName:h,properties:o}}else n=h;return n}var d=a("browser-split"),e=/([\.#]?[a-zA-Z0-9_:-]+)/,f=/^\.|#/;b.exports=c},{"browser-split":9}],9:[function(a,b){b.exports=function(a){var b,c=String.prototype.split,d=/()??/.exec("")[1]===a;return b=function(b,e,f){if("[object RegExp]"!==Object.prototype.toString.call(e))return c.call(b,e,f);var g,h,i,j,k=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),m=0,e=new RegExp(e.source,l+"g");for(b+="",d||(g=new RegExp("^"+e.source+"$(?!\\s)",l)),f=f===a?-1>>>0:f>>>0;(h=e.exec(b))&&(i=h.index+h[0].length,!(i>m&&(k.push(b.slice(m,h.index)),!d&&h.length>1&&h[0].replace(g,function(){for(var b=1;b<arguments.length-2;b++)arguments[b]===a&&(h[b]=a)}),h.length>1&&h.index<b.length&&Array.prototype.push.apply(k,h.slice(1)),j=h[0].length,m=i,k.length>=f)));)e.lastIndex===h.index&&e.lastIndex++;return m===b.length?(j||!e.test(""))&&k.push(""):k.push(b.slice(m)),k.length>f?k.slice(0,f):k}}()},{}],10:[function(a,b){function c(a){return"object"==typeof a&&null!==a}b.exports=c},{}],11:[function(a,b){function c(a,b,c){for(var f in b){var i=b[f];void 0===i?d(a,b,c,f):h(i)?i.hook(a,f,c?c[f]:void 0):g(i)?e(a,b,c,f,i):void 0!==i&&(a[f]=i)}}function d(a,b,c,d){if(c){var e=c[d];if(!h(e))if("attributes"===d)for(var f in e)a.removeAttribute(f);else if("style"===d)for(var g in e)a.style[g]="";else a[d]="string"==typeof e?"":null}}function e(a,b,c,d,e){var h=c?c[d]:void 0;if("attributes"!==d){if(h&&g(h)&&f(h)!==f(e))return void(a[d]=e);g(a[d])||(a[d]={});var i="style"===d?"":void 0;for(var j in e){var k=e[j];a[d][j]=void 0===k?i:k}}else for(var l in e){var m=e[l];void 0===m?a.removeAttribute(l):a.setAttribute(l,m)}}function f(a){return Object.getPrototypeOf?Object.getPrototypeOf(a):a.__proto__?a.__proto__:a.constructor?a.constructor.prototype:void 0}var g=a("is-object"),h=a("vtree/is-vhook");b.exports=c},{"is-object":10,"vtree/is-vhook":21}],12:[function(a,b){function c(a,b){var j=b?b.document||d:d,k=b?b.warn:null;if(a=i(a).a,h(a))return a.init();if(g(a))return j.createTextNode(a.text);if(!f(a))return k&&k("Item is not a valid virtual dom node",a),null;var l=null===a.namespace?j.createElement(a.tagName):j.createElementNS(a.namespace,a.tagName),m=a.properties;e(l,m);for(var n=a.children,o=0;o<n.length;o++){var p=c(n[o],b);p&&l.appendChild(p)}return l}var d=a("global/document"),e=a("./apply-properties"),f=a("vtree/is-vnode"),g=a("vtree/is-vtext"),h=a("vtree/is-widget"),i=a("vtree/handle-thunk");b.exports=c},{"./apply-properties":11,"global/document":14,"vtree/handle-thunk":19,"vtree/is-vnode":22,"vtree/is-vtext":23,"vtree/is-widget":24}],13:[function(a,b){function c(a,b,c,e){return c&&0!==c.length?(c.sort(f),d(a,b,c,e,0)):{}}function d(a,b,c,f,h){if(f=f||{},a){e(c,h,h)&&(f[h]=a);var i=b.children;if(i)for(var j=a.childNodes,k=0;k<b.children.length;k++){h+=1;var l=i[k]||g,m=h+(l.count||0);e(c,h,m)&&d(j[k],l,c,f,h),h=m}}return f}function e(a,b,c){if(0===a.length)return!1;for(var d,e,f=0,g=a.length-1;g>=f;){if(d=(g+f)/2>>0,e=a[d],f===g)return e>=b&&c>=e;if(b>e)f=d+1;else{if(!(e>c))return!0;g=d-1}}return!1}function f(a,b){return a>b?1:-1}var g={};b.exports=c},{}],14:[function(a,b){(function(c){var d="undefined"!=typeof c?c:"undefined"!=typeof window?window:{},e=a("min-document");if("undefined"!=typeof document)b.exports=document;else{var f=d["__GLOBAL_DOCUMENT_CACHE@4"];f||(f=d["__GLOBAL_DOCUMENT_CACHE@4"]=e),b.exports=f}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":2}],15:[function(a,b){function c(a,b,c){var i=a.type,m=a.vNode,o=a.patch;switch(i){case n.REMOVE:return d(b,m);case n.INSERT:return e(b,o,c);case n.VTEXT:return f(b,m,o,c);case n.WIDGET:return g(b,m,o,c);case n.VNODE:return h(b,m,o,c);case n.ORDER:return j(b,o),b;case n.PROPS:return l(b,o,m.properties),b;case n.THUNK:return k(b,c.patch(b,o,c));default:return b}}function d(a,b){var c=a.parentNode;return c&&c.removeChild(a),i(a,b),null}function e(a,b,c){var d=o(b,c);return a&&a.appendChild(d),a}function f(a,b,c,d){var e;if(3===a.nodeType)a.replaceData(0,a.length,c.text),e=a;else{var f=a.parentNode;e=o(c,d),f&&f.replaceChild(e,a)}return i(a,b),e}function g(a,b,c,d){if(p(b,c))return c.update(b,a)||a;var e=a.parentNode,f=o(c,d);return e&&e.replaceChild(f,a),i(a,b),f}function h(a,b,c,d){var e=a.parentNode,f=o(c,d);return e&&e.replaceChild(f,a),i(a,b),f}function i(a,b){"function"==typeof b.destroy&&m(b)&&b.destroy(a)}function j(a,b){var c,d=[],e=a.childNodes,f=e.length,g=b.reverse;for(c=0;f>c;c++)d.push(a.childNodes[c]);var h,i,j,k=0;for(c=0;f>c;c++)h=b[c],void 0!==h&&h!==c&&(g[c]>c&&k++,i=d[h],j=e[c+k]||null,i!==j&&a.insertBefore(i,j),c>h&&k--),c in b.removes&&k++}function k(a,b){return a&&b&&a!==b&&a.parentNode&&(console.log(a),a.parentNode.replaceChild(b,a)),b}var l=a("./apply-properties"),m=a("vtree/is-widget"),n=a("vtree/vpatch"),o=a("./create-element"),p=a("./update-widget");b.exports=c},{"./apply-properties":11,"./create-element":12,"./update-widget":17,"vtree/is-widget":24,"vtree/vpatch":27}],16:[function(a,b){function c(a,b){return d(a,b)}function d(a,b,c){var h=f(b);if(0===h.length)return a;var j=i(a,b.a,h),k=a.ownerDocument;c||(c={patch:d},k!==g&&(c.document=k));for(var l=0;l<h.length;l++){var m=h[l];a=e(a,j[m],b[m],c)}return a}function e(a,b,c,d){if(!b)return a;var e;if(h(c))for(var f=0;f<c.length;f++)e=j(c[f],b,d),b===a&&(a=e);else e=j(c,b,d),b===a&&(a=e);return a}function f(a){var b=[];for(var c in a)"a"!==c&&b.push(Number(c));return b}var g=a("global/document"),h=a("x-is-array"),i=a("./dom-index"),j=a("./patch-op");b.exports=c},{"./dom-index":13,"./patch-op":15,"global/document":14,"x-is-array":29}],17:[function(a,b){function c(a,b){return d(a)&&d(b)?"name"in a&&"name"in b?a.id===b.id:a.init===b.init:!1}var d=a("vtree/is-widget");b.exports=c},{"vtree/is-widget":24}],18:[function(a,b){function c(a,b){var c={a:a};return d(a,b,c,0),c}function d(a,b,c,d){if(a===b)return void(u(a)||u(b)?i(a,b,c,d):k(b,c,d));var f=c[d];if(null==b)f=n(f,new q(q.REMOVE,a,b)),h(a,c,d);else if(u(a)||u(b))i(a,b,c,d);else if(r(b))if(r(a)){if(a.tagName===b.tagName&&a.namespace===b.namespace&&a.key===b.key){var j=e(a.properties,b.properties,b.hooks);j&&(f=n(f,new q(q.PROPS,a,j)))}else f=n(f,new q(q.VNODE,a,b)),h(a,c,d);f=g(a,b,c,f,d)}else f=n(f,new q(q.VNODE,a,b)),h(a,c,d);else s(b)?s(a)?a.text!==b.text&&(f=n(f,new q(q.VTEXT,a,b))):(f=n(f,new q(q.VTEXT,a,b)),h(a,c,d)):t(b)&&(f=n(f,new q(q.WIDGET,a,b)),t(a)||h(a,c,d));f&&(c[d]=f)}function e(a,b,c){var d;for(var g in a){g in b||(d=d||{},d[g]=void 0);var h=a[g],i=b[g];if(c&&g in c)d=d||{},d[g]=i;else if(p(h)&&p(i))if(f(i)!==f(h))d=d||{},d[g]=i;else{var j=e(h,i);j&&(d=d||{},d[g]=j)}else h!==i&&(d=d||{},d[g]=i)}for(var k in b)k in a||(d=d||{},d[k]=b[k]);return d}function f(a){return Object.getPrototypeOf?Object.getPrototypeOf(a):a.__proto__?a.__proto__:a.constructor?a.constructor.prototype:void 0}function g(a,b,c,e,f){for(var g=a.children,i=l(g,b.children),j=g.length,k=i.length,m=j>k?j:k,o=0;m>o;o++){var p=g[o],s=i[o];f+=1,p?s?d(p,s,c,f):p&&(c[f]=new q(q.REMOVE,p,null),h(p,c,f)):s&&(e=n(e,new q(q.INSERT,null,s))),r(p)&&p.count&&(f+=p.count)}return i.moves&&(e=n(e,new q(q.ORDER,a,i.moves))),e}function h(a,b,c){if(t(a))"function"==typeof a.destroy&&(b[c]=new q(q.REMOVE,a,null));else if(r(a)&&a.hasWidgets)for(var d=a.children,e=d.length,f=0;e>f;f++){var g=d[f];c+=1,h(g,b,c),r(g)&&g.count&&(c+=g.count)}}function i(a,b,d,e){var f=v(a,b),g=c(f.a,f.b);j(g)&&(d[e]=new q(q.THUNK,null,g))}function j(a){for(var b in a)if("a"!==b)return!0;return!1}function k(a,b,c){if(r(a)&&(a.hooks&&(b[c]=new q(q.PROPS,a.hooks,a.hooks)),a.descendantHooks))for(var d=a.children,e=d.length,f=0;e>f;f++){var g=d[f];c+=1,k(g,b,c),r(g)&&g.count&&(c+=g.count)}}function l(a,b){var c=m(b);if(!c)return b;var d=m(a);if(!d)return b;var e={},f={};for(var g in c)e[c[g]]=d[g];for(var g in d)f[d[g]]=c[g];for(var h=a.length,i=b.length,j=h>i?h:i,k=[],l=0,n=0,o=0,p={},q=p.removes={},r=p.reverse={},s=!1;j>l;){var t=f[n];if(void 0!==t)k[n]=b[t],t!==o&&(p[t]=o,r[o]=t,s=!0),o++;else if(n in f)k[n]=void 0,q[n]=o++,s=!0;else{for(;void 0!==e[l];)l++;if(j>l){var u=b[l];u&&(k[n]=u,l!==o&&(s=!0,p[l]=o,r[o]=l),o++),l++}}n++}return s&&(k.moves=p),k}function m(a){var b,c;for(b=0;b<a.length;b++){var d=a[b];void 0!==d.key&&(c=c||{},c[d.key]=b)}return c}function n(a,b){return a?(o(a)?a.push(b):a=[a,b],a):b}var o=a("x-is-array"),p=a("is-object"),q=a("./vpatch"),r=a("./is-vnode"),s=a("./is-vtext"),t=a("./is-widget"),u=a("./is-thunk"),v=a("./handle-thunk");b.exports=c},{"./handle-thunk":19,"./is-thunk":20,"./is-vnode":22,"./is-vtext":23,"./is-widget":24,"./vpatch":27,"is-object":10,"x-is-array":29}],19:[function(a,b){function c(a,b){var c=a,e=b;return h(b)&&(e=d(b,a)),h(a)&&(c=d(a,null)),{a:c,b:e}}function d(a,b){var c=a.vnode;if(c||(c=a.vnode=a.render(b)),!(e(c)||f(c)||g(c)))throw new Error("thunk did not return a valid node");return c}var e=a("./is-vnode"),f=a("./is-vtext"),g=a("./is-widget"),h=a("./is-thunk");b.exports=c},{"./is-thunk":20,"./is-vnode":22,"./is-vtext":23,"./is-widget":24}],20:[function(a,b){function c(a){return a&&"Thunk"===a.type}b.exports=c},{}],21:[function(a,b){function c(a){return a&&"function"==typeof a.hook&&!a.hasOwnProperty("hook")}b.exports=c},{}],22:[function(a,b){function c(a){return a&&"VirtualNode"===a.type&&a.version===d}var d=a("./version");b.exports=c},{"./version":25}],23:[function(a,b){function c(a){return a&&"VirtualText"===a.type&&a.version===d}var d=a("./version");b.exports=c},{"./version":25}],24:[function(a,b){function c(a){return a&&"Widget"===a.type}b.exports=c},{}],25:[function(a,b){b.exports="1"},{}],26:[function(a,b){function c(a,b,c,d,j){this.tagName=a,this.properties=b||h,this.children=c||i,this.key=null!=d?String(d):void 0,this.namespace="string"==typeof j?j:null;var k,l=c&&c.length||0,m=0,n=!1,o=!1;for(var p in b)if(b.hasOwnProperty(p)){var q=b[p];g(q)&&(k||(k={}),k[p]=q)}for(var r=0;l>r;r++){var s=c[r];e(s)?(m+=s.count||0,!n&&s.hasWidgets&&(n=!0),o||!s.hooks&&!s.descendantHooks||(o=!0)):!n&&f(s)&&"function"==typeof s.destroy&&(n=!0)}this.count=l+m,this.hasWidgets=n,this.hooks=k,this.descendantHooks=o}var d=a("./version"),e=a("./is-vnode"),f=a("./is-widget"),g=a("./is-vhook");b.exports=c;var h={},i=[];c.prototype.version=d,c.prototype.type="VirtualNode"},{"./is-vhook":21,"./is-vnode":22,"./is-widget":24,"./version":25}],27:[function(a,b){function c(a,b,c){this.type=Number(a),this.vNode=b,this.patch=c}var d=a("./version");c.NONE=0,c.VTEXT=1,c.VNODE=2,c.WIDGET=3,c.PROPS=4,c.ORDER=5,c.INSERT=6,c.REMOVE=7,c.THUNK=8,b.exports=c,c.prototype.version=d,c.prototype.type="VirtualPatch"},{"./version":25}],28:[function(a,b){function c(a){this.text=String(a)}var d=a("./version");b.exports=c,c.prototype.version=d,c.prototype.type="VirtualText"},{"./version":25}],29:[function(a,b){function c(a){return"[object Array]"===e.call(a)}var d=Array.isArray,e=Object.prototype.toString;b.exports=d||c},{}],30:[function(a,b){function c(a){return"[object String]"===d.call(a)}var d=Object.prototype.toString;b.exports=c},{}],31:[function(a,b){var c=a("vdom/patch");b.exports=c},{"vdom/patch":16}],32:[function(a,b){"use strict";b.exports={REX_INTERPOLATE_SYMBOL:/{{[^{}]+}}/g,REX_REPEAT_SYMBOL:/{{(\w+)\sin\s([\w\.]+)}}/,STR_REPEAT_ATTRIBUTE:"cl-repeat"}},{}],33:[function(a,b){"use strict";function c(){}var d=a("./helper"),e=a("./template");b.exports={create:function(a,b){var e={_doc:document._currentScript?document._currentScript.ownerDocument:document.currentScript?document.currentScript.ownerDocument:document,_created:d.isFunction(b.createdCallback)?b.createdCallback:d.noop,_attached:d.isFunction(b.attachedCallback)?b.attachedCallback:d.noop,_detached:d.isFunction(b.detachedCallback)?b.detachedCallback:d.noop,_attrChanged:d.isFunction(b.attributeChangedCallback)?b.attributeChangedCallback:d.noop,_html:"",root:null,template:null,scope:{},events:{},use:{}};d.mix(d.mix(b,e),c.prototype,!0),d.ready(function(){var c=b._doc.querySelector('[cl-element="'+a+'"]');b._html=c?c.innerHTML:""});var f,g;return b.extends?(f=Object.create(b._doc.createElement(b.extends).constructor),d.isCustomElementName(b.extends)&&(g=d.mix(d.clone(f.prototype.scope),b.scope,!0),b=d.mix(d.clone(f.prototype),b,!0),b.scope=g,b.__super__=f.prototype,f=HTMLElement)):f=HTMLElement,d.mix(Object.create(f.prototype),b)}},d.mix(c.prototype,{_injectUseObject:function(){for(var a,b=this,c=Object.keys(this.use||{}),d=0;a=c[d++];){if(b[a])throw new Error("Conflict assign property `"+a+"`!");b[a]=this.use[a](this)}this.use=null},_cloneScopeObjects:function(){for(var a,b=this.scope,c=Object.keys(b),e=0;a=c[e++];)"object"==typeof b[a]&&(b[a]=d.clone(b[a]))},invalidate:function(){this.template.invalidate()},createdCallback:function(){this._injectUseObject(),this._cloneScopeObjects(),this._created()},attachedCallback:function(){this.createShadowRoot(),this.template=e.create(this._html,this.scope),this.root=this.template.createElement(this._doc),this.root&&(this.shadowRoot.appendChild(this.root),this.template.drawLoop(this.root)),this._attached()},detachedCallback:function(){this.template.destroy(),this._detached()},attributeChangedCallback:function(){this._attrChanged()},"super":function(){if(!this.__super__)throw new Error("This element does not have the `__super__`");var a=d.toArray(arguments),b=a.slice(0,1),c=a.slice(1),e=this.__super__[b];if(d.isFunction(e))return e.apply(this,c);throw new Error("Does not exists method in super element specified: "+e)}})},{"./helper":35,"./template":41}],34:[function(a,b){"use strict";function c(){}b.exports={create:function(){return new c}}},{}],35:[function(a,b){"use strict";function c(a,b,c){for(var d,e=0,f=Object.keys(b);d=f[e++];)(c||!a[d])&&(a[d]=b[d]);return a}function d(a){for(var b,c=0,d=[];b=a[c++];)l(b)?d=d.concat(b):d.push(b);return d}function e(a){return Array.isArray(a)?a.slice(0):c({},a)}function f(a){for(var b,c=[],d=0;b=a[d++];)-1===c.indexOf(b)&&c.push(b);return c}function g(a){var b=Object.prototype.toString.call(a);return b.slice(b.indexOf(" ")+1,-1)}function h(a){return Array.prototype.slice.call(a)}function i(a){return"function"==typeof a}function j(a){return"string"==typeof a}function k(a){return"number"==typeof a}function l(a){return"Array"===g(a)}function m(a){return-1!==a.indexOf("-")}function n(a){o?a():p.push(a)}var o=!1,p=[];document.addEventListener("DOMContentLoaded",function(){o=!0;for(var a,b=0;a=p[b++];)a()},!1),window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame,b.exports={noop:function(){},mix:c,uniq:f,clone:e,flatten:d,ready:n,toArray:h,toString:g,isString:j,isNumber:k,isArray:l,isFunction:i,isCustomElementName:m}},{}],36:[function(a,b){"use strict";function c(a){this.context=a}var d=a("../helper");d.mix(c.prototype,{get:function(){}}),b.exports=function(a){return new c(a)}},{"../helper":35}],37:[function(a,b){"use strict";function c(){}b.exports={create:function(){return new c}}},{}],38:[function(a,b){"use strict";function c(a,b){var c={prototype:d.create(a,b)};b.extends&&!e.isCustomElementName(b.extends)&&(c.extends=b.extends),document.registerElement(a,c)}var d=a("./element"),e=a("./helper");b.exports=c},{"./element":33,"./helper":35}],39:[function(a,b){"use strict";function c(a){var b=new l.DefaultHandler(function(a){a&&console.error(a)},{enforceEmptyTags:!0,ignoreWhitespace:!0,verbose:!1}),c=new l.Parser(b);if(console.time("parse html"),c.parseComplete(a),console.timeEnd("parse html"),b.dom.length>1)throw Error("Template must have exactly one root element. was: "+a);this.structure=b.dom[0]}function d(a){a=a||{};var b,c,g=a.data,j=a.attribs||{},l=a.children||[],m=a.hooks={},n=a.evaluators={attrs:{},style:!1,data:!1,repeat:!1},o=0;for(j.style&&(a.style=j.style,delete j.style,n.style=e(a.style)),b=Object.keys(j);c=b[o++];)k[c]?m[c]=h(k[c]):c===i.STR_REPEAT_ATTRIBUTE?(n.repeat=f(j[i.STR_REPEAT_ATTRIBUTE]),delete j[i.STR_REPEAT_ATTRIBUTE]):n.attrs[c]=e(j[c]);
return n.data=e(g),l.forEach(function(a){d(a)}),a}function e(a){a=a||"";var b=a.match(i.REX_INTERPOLATE_SYMBOL);if(null!==b)return new Function("data",["var s=[];","s.push('",a.replace(/[\r\n\t]/g," ").split("'").join("\\'").replace(/{{([^{}]+)}}/g,"',(data.$1 != null ? data.$1 : ''),'").split(/\s{2,}/).join(" "),"');","return s.join('');"].join(""))}function f(a){var b,c,d=(a||"").match(i.REX_REPEAT_SYMBOL);if(null===d)throw new Error("Unexpected syntax for repeat: "+a);return b=d[2],c=d[1],new Function("data",["return data."+b+".map(function(item) {","  var ks, k, i = 0, r = {};","  ks = Object.keys(data);","  while ((k = ks[i++])) {","    r[k] = data[k];","  }","  r."+c+" = item;","  return r;","});"].join(""))}function g(a){this.fn=a}function h(a){return new g(a)}var i=a("./constants"),j=a("./helper"),k=a("./template-helper"),l=a("htmlParser");b.exports={create:function(a){return new c(a)}},j.mix(c.prototype,{structure:{},compile:function(){return d(this.structure)}}),g.prototype.hook=function(){this.fn.apply(this,arguments)}},{"./constants":32,"./helper":35,"./template-helper":40,htmlParser:3}],40:[function(a,b){"use strict";a("./helper");b.exports={register:function(a,b){this[a]=b},hook:function(a){console.log("hook",a)}}},{"./helper":35}],41:[function(a,b){"use strict";function c(a,b){this.scope=b||{},this.compiled=j.create(a).compile()}function d(a,b,c){var g,h,j=a.name,k=a.type,l=a.data,m=a.attribs||{},n=a.style||"",o=a.children||[],p=a.evaluators,q={},r={},s=a.hooks,t=0;switch(k){case"tag":if(p.repeat&&!c)return p.repeat(b).map(function(b){return d(a,b,!0)});for(n&&(r=p.style?p.style(b):n,r=e(r)),g=Object.keys(m);h=g[t++];)q[h]=p.attrs[h]?p.attrs[h](b):m[h];return o=o.map(function(a){return d(a,b)}).filter(function(a){return!!a}),o=i.flatten(o),f(j,i.mix({attributes:q,style:r},s),o);case"text":return String(p.data?p.data(b):l);case"comment":return null}}function e(a){for(var b,c=a.replace(/\s/g,"").split(";"),d={},e=0;b=c[e++];)b=b.split(":"),d[b[0]]=b[1];return d}var f=a("virtual-dom/h"),g=a("virtual-dom/diff"),h=a("virtual-dom/patch"),i=a("./helper"),j=a("./template-compiler"),k=a("virtual-dom/create-element");b.exports={create:function(a,b){return new c(a,b)}},i.mix(c.prototype,{scope:{},compiled:{},_currentVTree:null,_diffQueue:[],_invalidated:!1,createVTree:function(){console.time("compute vtree");var a=this._currentVTree=d(this.compiled,this.scope);return console.timeEnd("compute vtree"),a},createElement:function(a){return k(this.createVTree(),{document:a||document})},invalidate:function(){this._invalidated||(this._invalidated=!0,setTimeout(this._update.bind(this),4))},_update:function(){console.time("compute vtree");var a=this._currentVTree,b=d(this.compiled,this.scope);console.timeEnd("compute vtree"),console.time("compute diff"),this._diffQueue=g(a,b),console.timeEnd("compute diff"),this._currentVTree=b,this._invalidated=!1},drawLoop:function(a){var b=function(){this._diffQueue&&(console.time("apply patch"),h(a,this._diffQueue),console.timeEnd("apply patch"),this._diffQueue=null),window.requestAnimationFrame(b)}.bind(this);b()},destroy:function(){this.scope=this.compiled=null}})},{"./helper":35,"./template-compiler":39,"virtual-dom/create-element":4,"virtual-dom/diff":5,"virtual-dom/h":6,"virtual-dom/patch":31}]},{},[1]);